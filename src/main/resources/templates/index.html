<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <!-- Bootstrap icons-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link th:href="@{/css/styles.css}" rel="stylesheet" />
    <title>Document</title>


</head>

<style>

          body {
  background: -webkit-gradient(linear, left top, left bottom, from(rgb(76, 77, 73)), to(rgb(41, 46, 47))) fixed;
    }



            img{
              border-style: inset;
            }

            .container{
            color: white;
            }

            .widthBtn{
            width : 210px
            height: 40px
            }

}
</style>
<body class="d-flex flex-column h-100">


<main class="flex-shrink-0">

    <nav th:replace="fragments/nav">

    </nav>
    <div class="container px-5 my-5">

        <div th:if="${param.success}" class="alert alert-success">
            You are registered successfully!
        </div>



        <div class="text-center mb-5">
            <h1 class="fw-bolder">Find For You And Friends</h1>

            <p class="lead fw-normal  mb-0 fw-bold">Items of passionate near you</p>
            <h2 style="color:green" th:if="${finalizeDone}==true"> You have successfully completed your order.</h2>
        </div>
        <div class="row gx-5">
            <div class="d-flex justify-content-center">

                <form th:action="@{/}" class="btn btn-outline-warning">
                    <input type="hidden" name="sortField" th:value="${sortField}">
                    <input type="hidden" name="sortDir" th:value="${sortDir}">
                    <b>Filter:</b>
                    <label for="cats">CATEGORY:</label>
                    <select id="cats" name="keyWord" th:value="${keyWord}" onchange="this.form.submit()" class="bg-dark text-warning">
                        <option value="" selected disabled hidden>SELECT CATEGORY</option>
                        <option th:value="'Paints'" th:text="Paints">Paints</option>
                        <option th:value="'Neckless'" th:text="Neckless">NeckLess</option>
                        <option th:value="'Bracelet'" th:text="Bracelet">Bracelet</option>
                    </select>
                </form>
                <button class="btn btn-outline-info"  onclick="clearFilter()" style="margin-left: 25px">ALL PRODUCTS</button>

            </div>
            <div sec:authorize="!isAuthenticated()" th:each="product :${products}" class="col-lg-6 mb-4 mt-4">
                <div class="position-relative mb-3 p-4 text-center">
                    <div class="">
                    <img role="button" th:onclick="begin()" class="img-fluid rounded-3 mb-3" style="width: 500px; height: 370px" th:src="${product.imageSource}" alt="..."/>
                    </div>
                    <span sec:authorize="hasRole('ADMIN')">
                        <label>ID:</label>
                        <span th:text="${product.id}" class="fw-bold text-warning">ID</span>
                    </span>
                    <span>
                    <label>Name:</label>
                    <span th:text="${product.name}" class="fw-bold text-warning">Name</span>
                    </span>
                    <span>
                    <label>Producer:</label>
                    <span th:text="${product.producer}" class="fw-bold text-warning">Producer</span>
                    </span>
                    <span>
                    <label>Price:</label>
                    <span th:text="${product.price}" class="fw-bold text-warning">Producer</span><span>Lv.</span>
                    </span>
                    <span sec:authorize="hasRole('ADMIN')" class="text-center">
                        <label>Quantity:</label>
                        <span th:text="${product.stock}" class="fw-bold text-warning">Quantity</span>
                    </span>

                </div>


        </div>
            <div sec:authorize="isAuthenticated()" th:each="product :${products}" class="col-lg-6 mb-4 mt-4">
                <div class="position-relative mb-3 text-center">
                    <div class="">

                            <img th:onclick="'javascript:location.href=\'' + @{'/product/' + ${product.id}} + '\''"  role="button" class="img-fluid rounded-3 mb-3" style="width: 400px; height: 330px" th:src="${product.imageSource}" alt="..."/>
                    </div>
                    <span sec:authorize="hasRole('ADMIN')">
                        <label>ID:</label>
                        <span th:text="${product.id}" class="fw-bold text-warning">ID</span>
                    </span>
                    <span>
                        <label>Name:</label>
                        <span th:text="${product.name}" class="fw-bold text-warning">Name</span>
                    </span>
                    <span>
                        <label>Producer:</label>
                        <span th:text="${product.producer}" class="fw-bold text-warning">Producer</span>
                    </span>
                    <span>
                        <label>Price:</label>
                        <span th:text="${product.price}" class="fw-bold text-warning">Price</span><span>Lv.</span>
                    </span>
                    <div sec:authorize="hasRole('ADMIN')">
                        <label>Quantity:</label>
                        <span th:text="${product.stock}" class="fw-bold text-warning">Quantity</span>
                    </div>

                </div>


            </div>
            <div class="mb-3" th:if = "${totalPages>1}">
                <div class="row justify-content-center">
                    <div class="col-2 text-primary">
                        Total rows: [[ ${totalItems}]]    -

                        <span th:each="i: ${#numbers.sequence(1, totalPages)}">
                      <a th:if="${currentPage != i}" th:href="@{'/products/page/' + ${i} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}+ ${keyWord!=null ? '&keyWord=' + keyWord : ''}}">[[${i}]]</a>
                        <span th:unless="${currentPage != i}">[[${i}]]</span>
					</span>
                    </div>

                    <div class="col-2 text-primary">
                        <a th:if="${currentPage < totalPages}" th:href="@{'/products/page/' + ${currentPage + 1}+ '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}+ ${keyWord!=null ? '&keyWord=' + keyWord : ''}}">Next</a>
                        <span th:unless="${currentPage < totalPages}">Next</span>
                    </div>
                    <div class="col-2 text-primary">
                        <a th:if="${currentPage < totalPages}" th:href="@{'/products/page/' + ${totalPages} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}+ ${keyWord!=null ? '&keyWord=' + keyWord : ''}}">Last</a>
                        <span th:unless="${currentPage < totalPages}">Last</span>
                    </div>
                </div>
            </div>
    </div>




</main>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<!-- Core theme JS-->
<script src="js/scripts.js"></script>
</body>


</html>